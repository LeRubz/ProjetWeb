{% extends 'layout.html.twig' %}

{% block title %}Dashboard{% endblock %}

{% block recherche %}{% endblock %}

{% block content %}
<main class="dashboard-container">
    <h1>ðŸ‘¥ Gestion des utilisateurs</h1>

    <h2>âž• Ajouter un nouveau compte</h2>
    <form method="POST" action="index.php?uri=Dashboard/add" class="add-user-form">
        <input type="text" name="nom" placeholder="Nom" required>
        <input type="text" name="prenom" placeholder="PrÃ©nom" required>
        <input type="email" name="email" placeholder="Email" required>
        <input type="text" name="tel" placeholder="TÃ©lÃ©phone" required>
        <input type="password" name="password" placeholder="Mot de passe" required>
        <select name="adminstatus" required>
            <option value="0">Utilisateur</option>
            <option value="1">Administrateur</option>
            <option value="2">Super Admin</option>
        </select>
        <button type="submit">CrÃ©er</button>
    </form>

    <table class="dashboard-table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nom</th>
                <th>PrÃ©nom</th>
                <th>Email</th>
                <th>TÃ©lÃ©phone</th>
                <th>Statut</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for user in users %}
            <tr>
                <form method="POST" action="index.php?uri=Dashboard/update">
                    <input type="hidden" name="id" value="{{ user.ID_USER }}">
                    <td>{{ user.ID_USER }}</td>
                    <td><input type="text" name="nom" value="{{ user.NAME }}"></td>
                    <td><input type="text" name="prenom" value="{{ user.FIRSTNAME }}"></td>
                    <td><input type="email" name="email" value="{{ user.EMAIL }}"></td>
                    <td><input type="text" name="tel" value="{{ user.TEL }}"></td>
                    <td>
                        <select name="adminstatus">
                            <option value="0" {% if user.ADMIN_STATUS == 0 %}selected{% endif %}>Utilisateur</option>
                            <option value="1" {% if user.ADMIN_STATUS == 1 %}selected{% endif %}>Administrateur</option>
                            <option value="2" {% if user.ADMIN_STATUS == 2 %}selected{% endif %}>Super Admin</option>
                        </select>
                    </td>
                    <td class="action-buttons">
                        <button type="submit" title="Enregistrer">ðŸ’¾</button>
                </form>
                <form method="POST" action="index.php?uri=Dashboard/delete" onsubmit="return confirm('Supprimer ce compte ?')">
                    <input type="hidden" name="id" value="{{ user.ID_USER }}">
                    <button type="submit" title="Supprimer">ðŸ—‘</button>
                </form>
                    </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</main>
{% endblock %}
